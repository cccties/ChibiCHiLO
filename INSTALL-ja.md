# インストール方法

[English](INSTALL-en.md) | 日本語

下記のドキュメントを参考に、環境を構築する。

Docker を使っているのは、開発用途である。

本番環境では、 Docker を介さずに、データベースのクラスター化などの検討もして、パフォーマンスやデータのバックアップなどから最適な構成を採ること。

本番投入するなら、継続的なパフォーマンス監視などの安定運用の対策を行うのをオススメする。

[サーバー用インストールドキュメント](./server/README.md)

## 環境変数

フロントエンド周りの静的コンテンツは環境変数を与えた後 `yarn build` コマンドを実行して生成する。
API の接続先の情報を変更する場合 .env を適宜書き換える必要がある。

.env:

| 環境変数                             | 説明                                                                |
| ------------------------------------ | ------------------------------------------------------------------- |
| `NEXT_PUBLIC_API_BASE_PATH`          | API の URL のベースとなるパス (デフォルト: `http://localhost:8080`) |
| `NEXT_PUBLIC_BASE_PATH`              | 静的コンテンツの URL のベースとなるパス (デフォルト: ``)            |
| `NEXT_PUBLIC_ACTIVITY_SEND_INTERVAL` | 学習活動の送信間隔 (秒) (デフォルト:`10`)                           |

## フロントエンド周りのビルド

### 前提条件

2021-03-09 現在、以下の環境でビルドを確認。

- Node.js v14.16.0
- Yarn 1.22.10

### ビルド

以下のコマンドを実行。

```sh
yarn && yarn build
```

### Storybook

いくつかの UI をブラウザで確認するには `yarn` 実行後、以下のコマンドを実行。

```sh
yarn storybook
```
